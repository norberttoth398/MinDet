<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Measure - PlagDetect</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Measure";
        var mkdocs_page_input_path = "references\\measure.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> PlagDetect
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">PlagDetect</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">About PlagDetect</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../cite/">How to cite</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../contribute/">How to contribute</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../background/">Background</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../Training/">Training</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../Inference/">Inference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../textural_work/">Textural Work</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/Skuggafjoll_analysis/">Large textural dataset analysis - Skuggafjoll</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/Sill_calibration/">Crystallisation time and Plagioclase shape calibration in sills</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">References</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../detector/">Detector</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../NMS/">NMS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tiling/">Tiling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../slicing/">Slicing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../thresholding/">Thresholding</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../run/">Run</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Process</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Measure</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#PlagDetect.Process.measure_funcs">PlagDetect.Process.measure_funcs</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#PlagDetect.Process.measure_funcs.gen_texture_data">gen_texture_data()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#PlagDetect.Process.measure_funcs.measure_bbox">measure_bbox()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#PlagDetect.Process.measure_funcs.measure_ellipse">measure_ellipse()</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../texture/">Texture</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../shape_calc/">ShapeCalc</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../mcmc/">MCMC Prediction</a>
                </li>
    </ul>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../licence/">Licence</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">PlagDetect</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>References &raquo;</li>
          <li>Process &raquo;</li>
      <li>Measure</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="measure-functions">Measure Functions</h1>


<div class="doc doc-object doc-module">


<a id="PlagDetect.Process.measure_funcs"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h2 id="PlagDetect.Process.measure_funcs.gen_texture_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">gen_texture_data</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">sqrt_area</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">BBOX</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Simple wrapper function to be used for generating textural data from labelled images. User has the option to 
choose between the different size measure and the method used to measure them as well between best fit (minimum area)
bounding box and best fit ellipse.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>img</code></td>
          <td>
                <code>ndarray</code>
          </td>
          <td><p>labelled object image - result of the segmentation algorithm.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>sqrt_area</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Set to True if size measure is area^0.5, if False then length will be used. Defaults to True.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>BBOX</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Set to True if crystal measurements are to be done using best fit bounding box - otherwise best fit
                 ellipse is used. Defaults to False.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>size</code></td>          <td>
                <code>ndarray</code>
          </td>
          <td><p>Array with all segmented crystal sizes</p></td>
        </tr>
        <tr>
<td></td>          <td>
          </td>
          <td><p>aspect ratio (ndarray): Array with all segmented crystal aspect ratios</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>PlagDetect\Process\measure_funcs.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">gen_texture_data</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">sqrt_area</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">BBOX</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Simple wrapper function to be used for generating textural data from labelled images. User has the option to </span>
<span class="sd">    choose between the different size measure and the method used to measure them as well between best fit (minimum area)</span>
<span class="sd">    bounding box and best fit ellipse.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ndarray): labelled object image - result of the segmentation algorithm.</span>
<span class="sd">        sqrt_area (bool, optional): Set to True if size measure is area^0.5, if False then length will be used. Defaults to True.</span>
<span class="sd">        BBOX (bool, optional): Set to True if crystal measurements are to be done using best fit bounding box - otherwise best fit</span>
<span class="sd">                             ellipse is used. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        size (ndarray): Array with all segmented crystal sizes</span>
<span class="sd">        aspect ratio (ndarray): Array with all segmented crystal aspect ratios</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">#make sure image is labelled - we&#39;ll assume connectivity = 2</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">measure</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">connectivity</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">BBOX</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1">#use BBOX function</span>
        <span class="n">size</span><span class="p">,</span> <span class="n">aspect_ratio</span> <span class="o">=</span> <span class="n">measure_bbox</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">sqrt_area</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1">#use ellipse function</span>
        <span class="n">size</span><span class="p">,</span> <span class="n">aspect_ratio</span> <span class="o">=</span> <span class="n">measure_ellipse</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">sqrt_area</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">size</span><span class="p">,</span> <span class="n">aspect_ratio</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="PlagDetect.Process.measure_funcs.measure_bbox" class="doc doc-heading">
<code class="highlight language-python"><span class="n">measure_bbox</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">sqrt_area</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Function to measure crystal sizes using best fit bounding box; this is the method akin to Higgins' and perhaps similar to how Marian
thinks of crystal sizes as well.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>img</code></td>
          <td>
                <code>ndarray</code>
          </td>
          <td><p>labelled object image - result of the segmentation algorithm.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>sqrt_area</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Set to True if size measure is area^0.5, if False then length will be used. Defaults to True.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>size</code></td>          <td>
                <code>ndarray</code>
          </td>
          <td><p>Array with all segmented crystal sizes</p></td>
        </tr>
        <tr>
<td></td>          <td>
          </td>
          <td><p>aspect ratio (ndarray): Array with all segmented crystal aspect ratios</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>PlagDetect\Process\measure_funcs.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">measure_bbox</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">sqrt_area</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function to measure crystal sizes using best fit bounding box; this is the method akin to Higgins&#39; and perhaps similar to how Marian</span>
<span class="sd">    thinks of crystal sizes as well.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ndarray): labelled object image - result of the segmentation algorithm.</span>
<span class="sd">        sqrt_area (bool, optional): Set to True if size measure is area^0.5, if False then length will be used. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        size (ndarray): Array with all segmented crystal sizes</span>
<span class="sd">        aspect ratio (ndarray): Array with all segmented crystal aspect ratios</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#calculate contours</span>
    <span class="n">cnt</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findContours</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">),</span><span class="n">cv2</span><span class="o">.</span><span class="n">RETR_EXTERNAL</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">CHAIN_APPROX_SIMPLE</span><span class="p">)</span>
    <span class="c1">#calculate minimum area bounding box (not axis aligned, but best fit)</span>
    <span class="n">bb</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">minAreaRect</span><span class="p">(</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">l1</span><span class="p">,</span> <span class="n">l2</span> <span class="o">=</span> <span class="n">bb</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="c1">#work out right way round</span>
    <span class="k">if</span> <span class="n">l1</span> <span class="o">&gt;</span> <span class="n">l2</span><span class="p">:</span>
        <span class="n">l</span> <span class="o">=</span> <span class="n">l1</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">l2</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">l</span> <span class="o">=</span> <span class="n">l2</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">l1</span>
    <span class="c1">#calculate aspect ratio</span>
    <span class="n">aspect_ratio</span> <span class="o">=</span> <span class="n">l</span><span class="o">/</span><span class="n">w</span>
    <span class="c1">#get the right size measure</span>
    <span class="k">if</span> <span class="n">sqrt_area</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">l</span><span class="o">*</span><span class="n">w</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">l</span>

    <span class="k">return</span> <span class="n">size</span><span class="p">,</span> <span class="n">aspect_ratio</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="PlagDetect.Process.measure_funcs.measure_ellipse" class="doc doc-heading">
<code class="highlight language-python"><span class="n">measure_ellipse</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">sqrt_area</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Use best fit ellipse to calculate the crystal dimensions using the scikit-image toolbox. This is the default for
many/most computer vision tasks and is also used in my slicing model. It is crucial to use this in conjunction with the slicing model
otherwise additional errors will have to be taken into account.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>img</code></td>
          <td>
                <code>ndarray</code>
          </td>
          <td><p>labelled object image - result of the segmentation algorithm.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>sqrt_area</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Set to True if size measure is area^0.5, if False then length will be used. Defaults to True.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>size</code></td>          <td>
                <code>ndarray</code>
          </td>
          <td><p>Array with all segmented crystal sizes</p></td>
        </tr>
        <tr>
<td></td>          <td>
          </td>
          <td><p>aspect ratio (ndarray): Array with all segmented crystal aspect ratios</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>PlagDetect\Process\measure_funcs.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">measure_ellipse</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">sqrt_area</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Use best fit ellipse to calculate the crystal dimensions using the scikit-image toolbox. This is the default for</span>
<span class="sd">    many/most computer vision tasks and is also used in my slicing model. It is crucial to use this in conjunction with the slicing model</span>
<span class="sd">    otherwise additional errors will have to be taken into account.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ndarray): labelled object image - result of the segmentation algorithm.</span>
<span class="sd">        sqrt_area (bool, optional): Set to True if size measure is area^0.5, if False then length will be used. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        size (ndarray): Array with all segmented crystal sizes</span>
<span class="sd">        aspect ratio (ndarray): Array with all segmented crystal aspect ratios</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#generate properties objects</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">measure</span><span class="o">.</span><span class="n">regionprops</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">area</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">major_axis</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">minor_axis</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1">#cycle through all objects to get data below</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">props</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">minor_axis_length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">area</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">area</span><span class="p">)</span>
            <span class="n">major_axis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">major_axis_length</span><span class="p">)</span>
            <span class="n">minor_axis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">minor_axis_length</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="c1">#calculate aspect ratio</span>
    <span class="n">aspect_ratio</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">major_axis</span><span class="p">,</span><span class="n">minor_axis</span><span class="p">)</span>
    <span class="c1">#get the chosen size measure right</span>
    <span class="k">if</span> <span class="n">sqrt_area</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">area</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">major_axis</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">size</span><span class="p">,</span> <span class="n">aspect_ratio</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../run/" class="btn btn-neutral float-left" title="Run"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../texture/" class="btn btn-neutral float-right" title="Texture">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright (c) 2023 Norbert Toth</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../run/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../texture/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
